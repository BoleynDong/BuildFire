{"version":3,"sources":["webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUISearch/index.vue?46fc","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUISearch/index.vue?dc7b","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUISearch/index.vue?6a0e","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUISearch/index.vue?4c59","uni-app:///TUIKit/components/TUISearch/index.vue?vue&type=script&lang=ts&","uni-app:///main.js"],"names":["__sfc_main","props","searchType","key","required","type","default","isUniFrameWork","setup","__props","__ctx","globalSearchRef","currentConversationID","searchingStatus","isShowInConversationSearch","isFullScreen","isPC","value","initSearchValue","TUIStore","update","StoreName","SEARCH","searchMessageTypeDefault","searchMessageTimeDefault","onCurrentConversationIDUpdate","conversationID","closeInConversationSearch","onCurrentSearchingStatusChange","isSearching","outsideClick","listen","domRefs","handler","closeGlobalSearch","TUIGlobal","hideTabBar","catch","showTabBar","onIsShowInConversationSearchChange","forEach","watch","CONV","currentSearchingStatus","unwatch","components","Object","assign","SearchInput","SearchMore","SearchContainer","SearchResult","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"TUIKit/components/TUISearch/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=c4f71706&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./style/index.scss?vue&type=style&index=0&id=c4f71706&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c4f71706\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"TUIKit/components/TUISearch/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=template&id=c4f71706&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--14-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--14-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ref, onMounted, computed, withDefaults, onUnmounted } from '../../adapter-vue';\nimport { TUIStore, StoreName } from '@tencentcloud/chat-uikit-engine';\nimport { TUIGlobal, outsideClick } from '@tencentcloud/universal-api';\nimport SearchInput from './search-input/index.vue';\nimport SearchContainer from './search-container/index.vue';\nimport SearchResult from './search-result/index.vue';\nimport SearchMore from './search-more/index.vue';\nimport { searchMessageTypeDefault } from './search-type-list';\nimport { searchMessageTimeDefault } from './search-time-list';\nimport { isPC, isUniFrameWork } from '../../utils/env';\nimport { ISearchingStatus, SEARCH_TYPE } from './type';\nconst __sfc_main = {};\n__sfc_main.props = {\n  searchType: {\n    key: \"searchType\",\n    required: false,\n    type: null,\n    default: () => {\n      return isUniFrameWork ? 'conversation' : 'global';\n    }\n  }\n};\n__sfc_main.setup = (__props, __ctx) => {\n  const props = __props;\n  const globalSearchRef = ref<HTMLElement | null>();\n  // 当前会话\n  const currentConversationID = ref<string>('');\n  // 控制搜索状态\n  const searchingStatus = ref<boolean>(false);\n  // 是否展示指定会话内搜索: 与 TUIChat 交互，由 TUIChat MessageInputToolBar 中 \"查看历史消息ICON\" 控制\n  const isShowInConversationSearch = ref<boolean>(isUniFrameWork);\n  // 是否全屏搜索 - 移动端正在搜索时全屏搜索\n  const isFullScreen = computed(() => !isPC && (props.searchType === 'global' && searchingStatus.value || props.searchType === 'conversation' && isShowInConversationSearch.value));\n  const initSearchValue = (searchType: SEARCH_TYPE) => {\n    TUIStore.update(StoreName.SEARCH, 'currentSearchInputValue', {\n      value: '',\n      searchType: searchType\n    });\n    TUIStore.update(StoreName.SEARCH, 'currentSearchMessageType', {\n      value: searchMessageTypeDefault[searchType],\n      searchType: searchType\n    });\n    TUIStore.update(StoreName.SEARCH, 'currentSearchMessageTime', {\n      value: searchMessageTimeDefault,\n      searchType: searchType\n    });\n  };\n  function onCurrentConversationIDUpdate(conversationID: string) {\n    if (!isUniFrameWork && currentConversationID.value !== conversationID) {\n      // pc端 单页面 切换会话，关闭搜索\n      closeInConversationSearch();\n    }\n    currentConversationID.value = conversationID;\n  }\n  function onCurrentSearchingStatusChange(value: ISearchingStatus) {\n    if (value?.searchType === props.searchType) {\n      searchingStatus.value = value?.isSearching;\n      // global search ui bind on click outside close\n      if (value?.searchType === 'global' && globalSearchRef.value) {\n        if (isPC && value.isSearching) {\n          outsideClick.listen({\n            domRefs: globalSearchRef.value,\n            handler: closeGlobalSearch\n          });\n        }\n      }\n      if (value?.searchType === 'global' && isUniFrameWork) {\n        // hide tab bar in uni-app when global searching\n        value.isSearching ? TUIGlobal?.hideTabBar()?.catch(() => {/* ignore */}) : TUIGlobal?.showTabBar()?.catch(() => {/* ignore */});\n      }\n    }\n  }\n  function onIsShowInConversationSearchChange(value: boolean) {\n    isShowInConversationSearch.value = value ? true : false;\n    isShowInConversationSearch.value && initSearchValue(props.searchType);\n  }\n  onMounted(() => {\n    // init with default value\n    ['global', 'conversation'].forEach((type: string) => {\n      initSearchValue((type as SEARCH_TYPE));\n    });\n    // watch store change\n    TUIStore.watch(StoreName.CONV, {\n      currentConversationID: onCurrentConversationIDUpdate\n    });\n    TUIStore.watch(StoreName.SEARCH, {\n      currentSearchingStatus: onCurrentSearchingStatusChange,\n      isShowInConversationSearch: onIsShowInConversationSearchChange\n    });\n  });\n  onUnmounted(() => {\n    // unwatch store change\n    TUIStore.unwatch(StoreName.CONV, {\n      currentConversationID: onCurrentConversationIDUpdate\n    });\n    TUIStore.unwatch(StoreName.SEARCH, {\n      currentSearchingStatus: onCurrentSearchingStatusChange,\n      isShowInConversationSearch: onIsShowInConversationSearchChange\n    });\n  });\n  function closeGlobalSearch() {\n    TUIStore.update(StoreName.SEARCH, 'currentSearchingStatus', {\n      isSearching: false,\n      searchType: props.searchType\n    });\n  }\n  function closeInConversationSearch() {\n    TUIStore.update(StoreName.SEARCH, 'isShowInConversationSearch', false);\n  }\n  return {\n    isPC,\n    isUniFrameWork,\n    globalSearchRef,\n    searchingStatus,\n    isShowInConversationSearch,\n    isFullScreen,\n    closeInConversationSearch\n  };\n};\n__sfc_main.components = Object.assign({\n  SearchInput,\n  SearchMore,\n  SearchContainer,\n  SearchResult\n}, __sfc_main.components);\nexport default __sfc_main;\n","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './TUIKit/components/TUISearch/index.vue'\ncreatePage(Page)"],"sourceRoot":""}