{"version":3,"sources":["webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUISearch/search-result/index.vue?2469","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUISearch/search-result/index.vue?b45c","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUISearch/search-result/index.vue?b235","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUISearch/search-result/index.vue?bf16","uni-app:///TUIKit/components/TUISearch/search-result/index.vue?vue&type=script&lang=ts&"],"names":["__sfc_main","props","searchType","type","String","default","validator","value","includes","setup","__props","__ctx","keywordList","messageTypeList","searchMessageTypeDefault","timePosition","timePeriod","keywordListMatchType","currentSearchTabKey","key","searchResult","searchAllMessageList","searchAllMessageTotalCount","currentSearchConversationID","searchConversationResult","searchConversationMessageList","searchConversationMessageTotalCount","searchConversationResultGroupByDate","isResultDetailShow","isLoading","isSearchDetailLoading","isSearchDefaultShow","length","Object","keys","onCurrentConversationIDUpdate","id","onCurrentSearchInputValueUpdate","obj","trim","split","onCurrentSearchMessageTypeUpdate","typeObject","onCurrentSearchMessageTimeUpdate","timeObject","TUIStore","watch","StoreName","CONV","currentConversationID","SEARCH","currentSearchInputValue","currentSearchMessageType","currentSearchMessageTime","unwatch","setMessageSearchResultList","option","undefined","conversationID","cursor","then","res","data","searchResultList","totalCount","assign","label","searchMessageTypeList","list","slice","messageList","groupResultListByDate","setMessageSearchResultListDebounce","resetSearchResult","newValue","oldValue","forEach","immediate","getMoreResult","result","update","getMoreResultInConversation","showResultDetail","isShow","targetType","targetResult","conversation","messageCount","generateListItemClass","item","generateResultItemDisplayType","isPC","push","date","time","prevYMD","currYMD","i","navigateToChatPosition","message","isSearching","TUIConversationService","switchConversation","CHAT","isUniFrameWork","TUIGlobal","navigateTo","url","navigateBack","generateVueRenderKey","TUITranslateService","searchIcon","enterIcon","enterConversation","components","SearchResultLoading","SearchResultDefault","SearchResultItem","Icon"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AAC6C;;;AAGjG;AACyN;AACzN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA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","file":"TUIKit/components/TUISearch/search-result/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=ce7b6d60&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./style/index.scss?vue&type=style&index=0&id=ce7b6d60&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ce7b6d60\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"TUIKit/components/TUISearch/search-result/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=template&id=ce7b6d60&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 =\n    !_vm.isLoading &&\n    !_vm.isSearchDefaultShow &&\n    _vm.props.searchType !== \"conversation\" &&\n    (_vm.isPC || !_vm.isResultDetailShow)\n      ? _vm.__map(_vm.searchResult, function (result, __i0__) {\n          var $orig = _vm.__get_orig(result)\n          var g0 =\n            _vm.props.searchType === \"global\"\n              ? _vm.TUITranslateService.t(\"TUISearch.\" + result.label)\n              : null\n          var l0 = _vm.__map(result.list, function (item, __i1__) {\n            var $orig = _vm.__get_orig(item)\n            var m0 = _vm.generateListItemClass(item)\n            return {\n              $orig: $orig,\n              m0: m0,\n            }\n          })\n          var g1 =\n            _vm.currentSearchTabKey === \"all\" || result.cursor\n              ? _vm.TUITranslateService.t(\"TUISearch.查看更多\")\n              : null\n          var g2 =\n            _vm.currentSearchTabKey === \"all\" || result.cursor\n              ? _vm.TUITranslateService.t(\"TUISearch.\" + result.label)\n              : null\n          return {\n            $orig: $orig,\n            g0: g0,\n            l0: l0,\n            g1: g1,\n            g2: g2,\n          }\n        })\n      : null\n  var g3 =\n    !_vm.isLoading &&\n    !_vm.isSearchDefaultShow &&\n    (_vm.isResultDetailShow || _vm.props.searchType === \"conversation\") &&\n    !_vm.isSearchDetailLoading &&\n    _vm.isResultDetailShow &&\n    _vm.props.searchType !== \"conversation\"\n      ? _vm.TUITranslateService.t(\"TUISearch.条与\")\n      : null\n  var g4 =\n    !_vm.isLoading &&\n    !_vm.isSearchDefaultShow &&\n    (_vm.isResultDetailShow || _vm.props.searchType === \"conversation\") &&\n    !_vm.isSearchDetailLoading &&\n    _vm.isResultDetailShow &&\n    _vm.props.searchType !== \"conversation\"\n      ? _vm.TUITranslateService.t(\"TUISearch.相关的\")\n      : null\n  var g5 =\n    !_vm.isLoading &&\n    !_vm.isSearchDefaultShow &&\n    (_vm.isResultDetailShow || _vm.props.searchType === \"conversation\") &&\n    !_vm.isSearchDetailLoading &&\n    _vm.isResultDetailShow &&\n    _vm.props.searchType !== \"conversation\"\n      ? _vm.TUITranslateService.t(\n          \"TUISearch.\" +\n            (_vm.currentSearchTabKey === \"allMessage\"\n              ? \"结果\"\n              : _vm.searchMessageTypeList[_vm.currentSearchTabKey].label)\n        )\n      : null\n  var g6 =\n    !_vm.isLoading &&\n    !_vm.isSearchDefaultShow &&\n    (_vm.isResultDetailShow || _vm.props.searchType === \"conversation\") &&\n    !_vm.isSearchDetailLoading &&\n    _vm.isResultDetailShow &&\n    _vm.props.searchType !== \"conversation\"\n      ? _vm.TUITranslateService.t(\"TUISearch.进入聊天\")\n      : null\n  var l2 =\n    !_vm.isLoading &&\n    !_vm.isSearchDefaultShow &&\n    (_vm.isResultDetailShow || _vm.props.searchType === \"conversation\") &&\n    !_vm.isSearchDetailLoading &&\n    _vm.searchConversationMessageList &&\n    _vm.searchConversationMessageList[0] &&\n    (_vm.props.searchType === \"global\" ||\n      (_vm.currentSearchTabKey !== \"imageMessage\" &&\n        _vm.currentSearchTabKey !== \"fileMessage\"))\n      ? _vm.__map(_vm.searchConversationMessageList, function (item, __i2__) {\n          var $orig = _vm.__get_orig(item)\n          var m1 = _vm.generateVueRenderKey(item.ID)\n          var g7 = item.getMessageContent()\n          var m2 = _vm.generateResultItemDisplayType()\n          return {\n            $orig: $orig,\n            m1: m1,\n            g7: g7,\n            m2: m2,\n          }\n        })\n      : null\n  var l4 =\n    !_vm.isLoading &&\n    !_vm.isSearchDefaultShow &&\n    (_vm.isResultDetailShow || _vm.props.searchType === \"conversation\") &&\n    !_vm.isSearchDetailLoading &&\n    _vm.searchConversationMessageList &&\n    _vm.searchConversationMessageList[0] &&\n    !(\n      _vm.props.searchType === \"global\" ||\n      (_vm.currentSearchTabKey !== \"imageMessage\" &&\n        _vm.currentSearchTabKey !== \"fileMessage\")\n    )\n      ? _vm.__map(\n          _vm.searchConversationResultGroupByDate,\n          function (group, __i3__) {\n            var $orig = _vm.__get_orig(group)\n            var m3 = _vm.generateVueRenderKey(group.date)\n            var m5 = _vm.generateResultItemDisplayType()\n            var l3 = _vm.__map(group.list, function (item, __i4__) {\n              var $orig = _vm.__get_orig(item)\n              var m4 = _vm.generateVueRenderKey(item.ID)\n              var g8 = item.getMessageContent()\n              return {\n                $orig: $orig,\n                m4: m4,\n                g8: g8,\n              }\n            })\n            return {\n              $orig: $orig,\n              m3: m3,\n              m5: m5,\n              l3: l3,\n            }\n          }\n        )\n      : null\n  var g9 =\n    !_vm.isLoading &&\n    !_vm.isSearchDefaultShow &&\n    (_vm.isResultDetailShow || _vm.props.searchType === \"conversation\") &&\n    !_vm.isSearchDetailLoading &&\n    _vm.searchConversationMessageList &&\n    _vm.searchConversationMessageList[0] &&\n    _vm.searchConversationResult &&\n    _vm.searchConversationResult.cursor\n      ? _vm.TUITranslateService.t(\"TUISearch.查看更多历史记录\")\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        l2: l2,\n        l4: l4,\n        g9: g9,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--14-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--14-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ref, watch, computed, onMounted, onUnmounted } from '../../../adapter-vue';\nimport { TUITranslateService, TUIConversationService, TUIStore, StoreName, IMessageModel, SearchCloudMessagesParams } from '@tencentcloud/chat-uikit-engine';\nimport { TUIGlobal } from '@tencentcloud/universal-api';\nimport SearchResultItem from './search-result-item/index.vue';\nimport SearchResultDefault from './search-result-default/index.vue';\nimport SearchResultLoading from './search-result-loading/index.vue';\nimport { searchMessageTypeList, searchMessageTypeDefault } from '../search-type-list';\nimport Icon from '../../common/Icon.vue';\nimport searchIcon from '../../../assets/icon/search.svg';\nimport enterIcon from '../../../assets/icon/right-icon.svg';\nimport { searchCloudMessages, enterConversation, generateSearchResultYMD, debounce } from '../utils';\nimport { enableSampleTaskStatus } from '../../../utils/enableSampleTaskStatus';\nimport { isPC, isUniFrameWork } from '../../../utils/env';\nimport { SEARCH_TYPE, ISearchInputValue, ISearchMessageType, ISearchMessageTime } from '../type';\nimport { ISearchCloudMessageResult, ISearchResultListItem } from '../../../interface';\nconst __sfc_main = {};\n__sfc_main.props = {\n  searchType: {\n    type: String,\n    default: 'global',\n    // \"global\":全局搜索, \"conversation\":会话内搜索\n    validator(value: string) {\n      return ['global', 'conversation'].includes(value);\n    }\n  }\n};\n__sfc_main.setup = (__props, __ctx) => {\n  const props = __props;\n\n  // search params\n  const keywordList = ref<Array<string>>([]);\n  const messageTypeList = ref<string | Array<string>>((searchMessageTypeDefault[(props.searchType as SEARCH_TYPE)]?.value as Array<string>));\n  const timePosition = ref<number>(0);\n  const timePeriod = ref<number>(0);\n  // 通过空格分割整串输入后，按照“与”关系搜索\n  // 比如: 输入\"111 222\", 搜索既有 111 又有 222 的消息, 同时也包含到严格搜索“111 222”的消息情况\n  const keywordListMatchType = ref<string>('and');\n\n  // current search tab key\n  const currentSearchTabKey = ref<string>(searchMessageTypeDefault[(props.searchType as SEARCH_TYPE)]?.key);\n\n  // search results all（所有会话搜索结果)\n  const searchResult = ref<{\n    [propsName: string]: {\n      key: string;\n      label: string;\n      list: Array<ISearchResultListItem>;\n      cursor: string | null;\n    };\n  }>({});\n  const searchAllMessageList = ref<Array<ISearchResultListItem>>([]);\n  const searchAllMessageTotalCount = ref<number>(0);\n\n  // search results detail（具体某个会话的搜索结果）\n  const currentSearchConversationID = ref<string>('');\n  const searchConversationResult = ref<ISearchCloudMessageResult>();\n  const searchConversationMessageList = ref<Array<IMessageModel>>([]);\n  const searchConversationMessageTotalCount = ref<number>();\n\n  // 文件消息/图片视频消息的搜索结果，按时间线分组\n  const searchConversationResultGroupByDate = ref<Array<{\n    date: string;\n    list: Array<IMessageModel>;\n  }>>([]);\n\n  // ui display control\n  const isResultDetailShow = ref<boolean>(false);\n  const isLoading = ref<boolean>(false);\n  const isSearchDetailLoading = ref<boolean>(false);\n  const isSearchDefaultShow = computed((): boolean => {\n    if (isLoading.value) {\n      return false;\n    }\n    if (props.searchType === 'global') {\n      // 未搜索 / 有结果\n      if (!keywordList?.value?.length || Object?.keys(searchResult.value)?.length) {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      if (searchConversationMessageList?.value?.length) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  });\n  function onCurrentConversationIDUpdate(id: string) {\n    props.searchType === 'conversation' && (currentSearchConversationID.value = id);\n  }\n  function onCurrentSearchInputValueUpdate(obj: ISearchInputValue) {\n    if (obj?.searchType === props?.searchType) {\n      // 根据空格模糊搜索结果\n      keywordList.value = obj?.value ? obj.value.trim().split(/\\s+/) : [];\n    }\n  }\n  function onCurrentSearchMessageTypeUpdate(typeObject: ISearchMessageType) {\n    if (typeObject?.searchType === props?.searchType) {\n      currentSearchTabKey.value = typeObject?.value?.key || searchMessageTypeDefault[(props.searchType as SEARCH_TYPE)]?.key;\n      messageTypeList.value = typeObject?.value?.value || searchMessageTypeDefault[(props.searchType as SEARCH_TYPE)]?.value;\n    }\n  }\n  function onCurrentSearchMessageTimeUpdate(timeObject: ISearchMessageTime) {\n    if (timeObject?.searchType === props?.searchType) {\n      timePosition.value = timeObject?.value?.value?.timePosition;\n      timePeriod.value = timeObject?.value?.value?.timePeriod;\n    }\n  }\n  onMounted(() => {\n    TUIStore.watch(StoreName.CONV, {\n      currentConversationID: onCurrentConversationIDUpdate\n    });\n    TUIStore.watch(StoreName.SEARCH, {\n      currentSearchInputValue: onCurrentSearchInputValueUpdate,\n      currentSearchMessageType: onCurrentSearchMessageTypeUpdate,\n      currentSearchMessageTime: onCurrentSearchMessageTimeUpdate\n    });\n  });\n  onUnmounted(() => {\n    TUIStore.unwatch(StoreName.CONV, {\n      currentConversationID: onCurrentConversationIDUpdate\n    });\n    TUIStore.unwatch(StoreName.SEARCH, {\n      currentSearchInputValue: onCurrentSearchInputValueUpdate,\n      currentSearchMessageType: onCurrentSearchMessageTypeUpdate,\n      currentSearchMessageTime: onCurrentSearchMessageTimeUpdate\n    });\n  });\n  const setMessageSearchResultList = (option?: {\n    conversationID?: string | undefined;\n    cursor?: string | undefined;\n  }) => {\n    searchCloudMessages(({\n      keywordList: keywordList?.value?.length ? keywordList.value : undefined,\n      messageTypeList: typeof messageTypeList.value === 'string' ? [messageTypeList.value] : messageTypeList.value,\n      timePosition: timePosition.value,\n      timePeriod: timePeriod.value,\n      conversationID: option?.conversationID || undefined,\n      cursor: option?.cursor || undefined,\n      keywordListMatchType: keywordListMatchType.value\n    } as SearchCloudMessagesParams)).then((res: {\n      data: ISearchCloudMessageResult;\n    }) => {\n      enableSampleTaskStatus('searchCloudMessage');\n      if (!option?.conversationID) {\n        // 全部会话搜索结果\n        option?.cursor ? searchAllMessageList.value = [...searchAllMessageList.value, ...res.data.searchResultList] : searchAllMessageList.value = res?.data?.searchResultList;\n        searchAllMessageTotalCount.value = res?.data?.totalCount;\n        const key = currentSearchTabKey.value === 'all' ? 'allMessage' : currentSearchTabKey.value;\n        if (searchAllMessageList?.value?.length && currentSearchTabKey.value !== 'contact' && currentSearchTabKey.value !== 'group') {\n          searchResult.value = Object.assign({}, searchResult.value, {\n            [key]: {\n              key,\n              label: searchMessageTypeList[key].label,\n              list: currentSearchTabKey.value === 'all' ? searchAllMessageList?.value?.slice(0, 3) : searchAllMessageList?.value,\n              cursor: res?.data?.cursor || null\n            }\n          });\n        } else {\n          delete searchResult?.value[key];\n        }\n      } else {\n        // 指定会话搜索结果\n        searchConversationResult.value = res?.data;\n        option?.cursor ? searchConversationMessageList.value = [...searchConversationMessageList.value, ...(res?.data?.searchResultList[0]?.messageList as Array<IMessageModel>)] : searchConversationMessageList.value = res?.data?.searchResultList[0]?.messageList;\n        // todo: 此处为 后台 totalCount 不准确的规避方案，待后台修复后请改为 res?.data?.totalCount\n        searchConversationMessageTotalCount.value = res?.data?.totalCount;\n        // 计算时间戳展示位置（仅会话内搜索 文件/图片 类型需要）\n        if (props?.searchType === 'conversation' && (currentSearchTabKey.value === 'fileMessage' || currentSearchTabKey.value === 'imageMessage')) {\n          searchConversationResultGroupByDate.value = groupResultListByDate(searchConversationMessageList.value);\n        } else {\n          searchConversationResultGroupByDate.value = [];\n        }\n      }\n      isLoading.value = false;\n      isSearchDetailLoading.value = false;\n    });\n  };\n  const setMessageSearchResultListDebounce = debounce(setMessageSearchResultList, 500);\n  const resetSearchResult = () => {\n    searchResult.value = {};\n    searchConversationResult.value = ({} as ISearchCloudMessageResult);\n    searchConversationMessageList.value = [];\n    searchConversationResultGroupByDate.value = [];\n  };\n  watch(() => [keywordList.value, currentSearchTabKey.value, timePosition.value, timePeriod.value], (newValue, oldValue) => {\n    if (newValue === oldValue) {\n      return;\n    }\n    // 全局搜索必须有关键词，会话内搜索可以没有关键词\n    if (!keywordList?.value?.length && props?.searchType === 'global') {\n      resetSearchResult();\n      return;\n    }\n    isLoading.value = true;\n    if (props.searchType === 'conversation') {\n      // 会话内搜索\n      resetSearchResult();\n      setMessageSearchResultList({\n        conversationID: currentSearchConversationID.value\n      });\n    } else {\n      // 全局搜索\n      if (oldValue && oldValue[1] === 'all' && newValue && newValue[1] === 'allMessage') {\n        // 从【全部结果-聊天记录】分类中 点击某条结果，直接跳转到【聊天记录】tab，并且打开相关会话内搜索结果 情况, isResultDetailShow 保持为true\n        // 不重新搜索\n        searchResult?.value['allMessage']?.list && (searchResult.value['allMessage'].list = searchAllMessageList?.value);\n        // 清除非聊天记录类型的其他搜索结果\n        Object?.keys(searchResult?.value)?.forEach((key: string) => {\n          if (key !== 'allMessage') {\n            delete searchResult?.value[key];\n          }\n        });\n        isLoading.value = false;\n        return;\n      } else {\n        // 其余情况，恢复 isResultDetailShow.value 为 false，并且重新搜索\n        isResultDetailShow.value = false;\n        resetSearchResult();\n      }\n      setMessageSearchResultListDebounce();\n    }\n  }, {\n    immediate: true\n  });\n  const getMoreResult = (result: {\n    key: string;\n    label: string;\n    list: Array<ISearchResultListItem>;\n    cursor: string | null;\n  }) => {\n    if (currentSearchTabKey.value === 'all') {\n      // 此时查看更多：切换到相应结果对应的result，展示其类型全量搜索结果\n      TUIStore.update(StoreName.SEARCH, 'currentSearchMessageType', {\n        value: searchMessageTypeList[result.key],\n        searchType: props.searchType\n      });\n    } else {\n      // 在某一单类结果下查看更多：根据 cursor 作为搜索起始位置，拉取下一部分结果\n      setMessageSearchResultList({\n        cursor: result?.cursor || undefined\n      });\n    }\n  };\n  const getMoreResultInConversation = () => {\n    setMessageSearchResultList({\n      cursor: searchConversationResult?.value?.cursor,\n      conversationID: currentSearchConversationID?.value\n    });\n  };\n  const showResultDetail = (isShow: boolean, targetType?: string, targetResult?: IMessageModel | ISearchResultListItem) => {\n    isResultDetailShow.value = isShow;\n    if (targetType) {\n      TUIStore.update(StoreName.SEARCH, 'currentSearchMessageType', {\n        value: searchMessageTypeList[targetType],\n        searchType: props.searchType\n      });\n    }\n    currentSearchConversationID.value = (targetResult as ISearchResultListItem)?.conversation?.conversationID || '';\n    searchConversationMessageTotalCount.value = (targetResult as ISearchResultListItem)?.messageCount;\n    if (targetResult) {\n      isSearchDetailLoading.value = true;\n      setMessageSearchResultListDebounce({\n        conversationID: currentSearchConversationID.value\n      });\n    }\n  };\n  const generateListItemClass = (item: ISearchResultListItem): Array<string> => {\n    return currentSearchConversationID.value === item?.conversation?.conversationID ? ['list-item', 'list-item-selected'] : ['list-item'];\n  };\n  const generateResultItemDisplayType = (): string => {\n    if (props.searchType === 'conversation' && currentSearchTabKey.value === 'fileMessage') {\n      return 'file';\n    } else if (props.searchType === 'conversation' && currentSearchTabKey.value === 'imageMessage') {\n      return 'image';\n    } else if (isPC) {\n      return 'bubble';\n    } else {\n      return 'info';\n    }\n  };\n  const groupResultListByDate = (messageList: Array<IMessageModel>): Array<{\n    date: string;\n    list: Array<IMessageModel>;\n  }> => {\n    const result: Array<{\n      date: string;\n      list: Array<IMessageModel>;\n    }> = [];\n    if (!messageList?.length) {\n      return result;\n    } else if (messageList?.length === 1) {\n      result.push({\n        date: generateSearchResultYMD(messageList[0]?.time),\n        list: messageList\n      });\n      return result;\n    }\n    let prevYMD = '';\n    let currYMD = '';\n    for (let i = 0; i < messageList?.length; i++) {\n      currYMD = generateSearchResultYMD(messageList[i]?.time);\n      if (prevYMD !== currYMD) {\n        result.push({\n          date: currYMD,\n          list: [messageList[i]]\n        });\n      } else {\n        result[result?.length - 1]?.list?.push(messageList[i]);\n      }\n      prevYMD = currYMD;\n    }\n    return result;\n  };\n  const navigateToChatPosition = (message: IMessageModel) => {\n    if (props.searchType === 'global') {\n      // 全局搜索，关闭 search container\n      TUIStore.update(StoreName.SEARCH, 'currentSearchingStatus', {\n        isSearching: false,\n        searchType: props.searchType\n      });\n      // 切换会话\n      TUIConversationService.switchConversation(message?.conversationID).then(() => {\n        TUIStore.update(StoreName.CHAT, 'messageSource', message);\n        isUniFrameWork && TUIGlobal?.navigateTo({\n          url: '/TUIKit/components/TUIChat/index'\n        });\n      });\n    } else if (props.searchType === 'conversation') {\n      // 会话内搜索，关闭 search container\n      TUIStore.update(StoreName.SEARCH, 'isShowInConversationSearch', false);\n      TUIStore.update(StoreName.CHAT, 'messageSource', message);\n      isUniFrameWork && TUIGlobal?.navigateBack();\n    }\n  };\n  const generateVueRenderKey = (value: string): string => {\n    return `${currentSearchTabKey}-${value}`;\n  };\n  return {\n    TUITranslateService,\n    searchMessageTypeList,\n    searchIcon,\n    enterIcon,\n    enterConversation,\n    isPC,\n    props,\n    keywordList,\n    currentSearchTabKey,\n    searchResult,\n    currentSearchConversationID,\n    searchConversationResult,\n    searchConversationMessageList,\n    searchConversationMessageTotalCount,\n    searchConversationResultGroupByDate,\n    isResultDetailShow,\n    isLoading,\n    isSearchDetailLoading,\n    isSearchDefaultShow,\n    getMoreResult,\n    getMoreResultInConversation,\n    showResultDetail,\n    generateListItemClass,\n    generateResultItemDisplayType,\n    navigateToChatPosition,\n    generateVueRenderKey\n  };\n};\n__sfc_main.components = Object.assign({\n  SearchResultLoading,\n  SearchResultDefault,\n  SearchResultItem,\n  Icon\n}, __sfc_main.components);\nexport default __sfc_main;\n"],"sourceRoot":""}