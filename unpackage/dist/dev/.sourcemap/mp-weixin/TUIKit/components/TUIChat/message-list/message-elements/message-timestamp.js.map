{"version":3,"sources":["webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.vue?6fa5","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.vue?b88a","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.vue?512d","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.vue?f75f","uni-app:///TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.vue?vue&type=script&lang=ts&","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.vue?acb5","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.vue?01f5"],"names":["__sfc_main","props","currTime","type","Number","default","prevTime","setup","__props","__ctx","timestampShowFlag","timestampShowContent","handleItemTime","value","calculateTimestamp","minDiffToShow","diff","newVal","oldVal","toString","immediate","timestamp","todayZero","Date","setHours","thisYear","getFullYear","getTime","target","oneDay","oneWeek","formatNum","num","getHours","getMinutes","TUITranslateService","t","weekdays","weekday","getDay","getMonth","getDate"],"mappings":"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","file":"TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./message-timestamp.vue?vue&type=template&id=4b3e8924&scoped=true&\"\nvar renderjs\nimport script from \"./message-timestamp.vue?vue&type=script&lang=ts&\"\nexport * from \"./message-timestamp.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./message-timestamp.vue?vue&type=style&index=0&id=4b3e8924&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b3e8924\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"TUIKit/components/TUIChat/message-list/message-elements/message-timestamp.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./message-timestamp.vue?vue&type=template&id=4b3e8924&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--14-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./message-timestamp.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--14-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./message-timestamp.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\nimport { toRefs, ref, watch } from '../../../../adapter-vue';\nimport { TUITranslateService } from '@tencentcloud/chat-uikit-engine';\nconst __sfc_main = {};\n__sfc_main.props = {\n  currTime: {\n    type: Number,\n    default: 0\n  },\n  prevTime: {\n    type: Number,\n    default: 0\n  }\n};\n__sfc_main.setup = (__props, __ctx) => {\n  const props = __props;\n  const {\n    currTime,\n    prevTime\n  } = toRefs(props);\n  const timestampShowFlag = ref(false);\n  const timestampShowContent = ref('');\n  const handleItemTime = (currTime: number, prevTime: number) => {\n    timestampShowFlag.value = false;\n    if (currTime <= 0) {\n      return '';\n    } else if (!prevTime || prevTime <= 0) {\n      timestampShowFlag.value = true;\n      return calculateTimestamp(currTime * 1000);\n    } else {\n      const minDiffToShow = 10 * 60; // 10min 10*60s\n      const diff = currTime - prevTime; // s\n      if (diff >= minDiffToShow) {\n        timestampShowFlag.value = true;\n        return calculateTimestamp(currTime * 1000);\n      }\n    }\n    return '';\n  };\n  watch(() => [currTime.value, prevTime.value], (newVal: any, oldVal: any) => {\n    if (newVal?.toString() === oldVal?.toString()) {\n      return;\n    } else {\n      timestampShowContent.value = handleItemTime(currTime.value, prevTime.value);\n    }\n  }, {\n    immediate: true\n  });\n\n  // 计算时间戳函数\n  // calculate timestamp\n  function calculateTimestamp(timestamp: number): string {\n    const todayZero = new Date().setHours(0, 0, 0, 0);\n    const thisYear = new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0).getTime();\n    const target = new Date(timestamp);\n    const oneDay = 24 * 60 * 60 * 1000;\n    const oneWeek = 7 * oneDay;\n    const diff = todayZero - target.getTime();\n    function formatNum(num: number): string {\n      return num < 10 ? '0' + num : num.toString();\n    }\n    if (diff <= 0) {\n      // today, only display hour:minute\n      return `${formatNum(target.getHours())}:${formatNum(target.getMinutes())}`;\n    } else if (diff <= oneDay) {\n      // yesterday, display yesterday:hour:minute\n      return `${TUITranslateService.t('time.昨天')} ${formatNum(target.getHours())}:${formatNum(target.getMinutes())}`;\n    } else if (diff <= oneWeek - oneDay) {\n      // Within a week, display weekday hour:minute\n      const weekdays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];\n      const weekday = weekdays[target.getDay()];\n      return `${TUITranslateService.t('time.' + weekday)} ${formatNum(target.getHours())}:${formatNum(target.getMinutes())}`;\n    } else if (target.getTime() >= thisYear) {\n      // Over a week, within this year, display mouth/day hour:minute\n      return `${target.getMonth() + 1}/${target.getDate()} ${formatNum(target.getHours())}:${formatNum(target.getMinutes())}`;\n    } else {\n      // Not within this year, display year/mouth/day hour:minute\n      return `${target.getFullYear()}/${target.getMonth() + 1}/${target.getDate()} ${formatNum(target.getHours())}:${formatNum(target.getMinutes())}`;\n    }\n  }\n  return {\n    timestampShowFlag,\n    timestampShowContent\n  };\n};\nexport default __sfc_main;\n","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./message-timestamp.vue?vue&type=style&index=0&id=4b3e8924&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./message-timestamp.vue?vue&type=style&index=0&id=4b3e8924&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1718595321252\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}