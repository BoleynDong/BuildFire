{"version":3,"sources":["webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIConversation/conversation-list/index.vue?b437","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIConversation/conversation-list/index.vue?5ac6","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIConversation/conversation-list/index.vue?0f41","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIConversation/conversation-list/index.vue?1ab6","uni-app:///TUIKit/components/TUIConversation/conversation-list/index.vue?vue&type=script&lang=ts&","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIConversation/conversation-list/index.vue?d9fb","webpack:////Users/wangwenle/Documents/有钱花/搭伙/build-fire/TUIKit/components/TUIConversation/conversation-list/index.vue?9009"],"names":["__sfc_main","setup","__props","__ctx","emits","emit","currentConversation","currentConversationID","currentConversationDomRect","isShowOverlay","conversationList","conversationListDomRef","conversationListInnerDomRef","actionsMenuPosition","top","left","undefined","conversationHeight","displayOnlineStatus","userOnlineStatusMap","lastestOpenActionsMenuTime","TUIStore","watch","StoreName","CONV","onCurrentConversationIDUpdated","onConversationListUpdated","onCurrentConversationUpdated","USER","onDisplayOnlineStatusUpdated","userStatusList","onUserStatusListUpdated","isUniFrameWork","isIOS","isPC","addLongPressHandler","unwatch","isShowUserOnlineStatus","conversation","value","type","TUIChatEngine","TYPES","CONV_C2C","showConversationActionMenu","event","index","isContextMenuEvent","preventDefault","Date","now","getActionsMenuPosition","closeConversationActionMenu","query","TUIGlobal","createSelectorQuery","in","select","boundingClientRect","data","bottom","isH5","touches","pageX","height","exec","rect","currentTarget","target","getBoundingClientRect","clientX","enterConversationChat","conversationID","TUIConversationService","switchConversation","element","onLongPress","Array","from","children","indexOf","options","eventDelegation","subSelector","list","id","status","size","entries","reduce","obj","key","Object","assign","muteIcon","isMobile","closeChildren","components","ActionsMenu","Avatar","Icon"],"mappings":"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","file":"TUIKit/components/TUIConversation/conversation-list/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=2da8161e&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./style/index.scss?vue&type=style&index=0&id=2da8161e&lang=scss&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=2da8161e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2da8161e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"TUIKit/components/TUIConversation/conversation-list/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=template&id=2da8161e&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.conversationList, function (conversation, index) {\n    var $orig = _vm.__get_orig(conversation)\n    var g0 = conversation.getAvatar()\n    var m0 = _vm.userOnlineStatusMap && _vm.isShowUserOnlineStatus(conversation)\n    var g1 = m0\n      ? Object.keys(_vm.userOnlineStatusMap).length > 0 &&\n        Object.keys(_vm.userOnlineStatusMap).includes(\n          conversation.userProfile.userID\n        ) &&\n        _vm.userOnlineStatusMap[conversation.userProfile.userID].statusType ===\n          1\n      : null\n    var g2 = conversation.getShowName()\n    var g3 =\n      conversation.type === \"GROUP\" &&\n      conversation.groupAtInfoList &&\n      conversation.groupAtInfoList.length > 0\n    var g4 = g3 ? conversation.getGroupAtInfo() : null\n    var g5 = conversation.getLastMessage(\"text\")\n    var g6 = conversation.getLastMessage(\"time\")\n    return {\n      $orig: $orig,\n      g0: g0,\n      m0: m0,\n      g1: g1,\n      g2: g2,\n      g3: g3,\n      g4: g4,\n      g5: g5,\n      g6: g6,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--14-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/ts-loader/index.js??ref--14-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ninterface IUserStatus {\n  statusType: number;\n  customStatus: string;\n}\ninterface IUserStatusMap {\n  [userID: string]: IUserStatus;\n}\nimport { ref, onMounted, onUnmounted } from '../../../adapter-vue';\nimport TUIChatEngine, { TUIStore, StoreName, TUIConversationService, IConversationModel } from '@tencentcloud/chat-uikit-engine';\nimport { TUIGlobal, isIOS, addLongPressListener } from '@tencentcloud/universal-api';\nimport Icon from '../../common/Icon.vue';\nimport Avatar from '../../common/Avatar/index.vue';\nimport ActionsMenu from '../actions-menu/index.vue';\nimport muteIcon from '../../../assets/icon/mute.svg';\nimport { isPC, isH5, isUniFrameWork, isMobile } from '../../../utils/env';\nconst __sfc_main = {};\n__sfc_main.setup = (__props, __ctx) => {\n  const emits = __ctx.emit;\n  const currentConversation = ref<IConversationModel>();\n  const currentConversationID = ref<string>();\n  const currentConversationDomRect = ref<DOMRect>();\n  const isShowOverlay = ref<boolean>(false);\n  const conversationList = ref<IConversationModel[]>([]);\n  const conversationListDomRef = ref<HTMLElement | undefined>();\n  const conversationListInnerDomRef = ref<HTMLElement | undefined>();\n  const actionsMenuPosition = ref<{\n    top: number;\n    left: number | undefined;\n    conversationHeight: number | undefined;\n  }>({\n    top: 0,\n    left: undefined,\n    conversationHeight: undefined\n  });\n  const displayOnlineStatus = ref(false); // 在线状态 默认关闭\n  const userOnlineStatusMap = ref<IUserStatusMap>();\n  let lastestOpenActionsMenuTime: number | null = null;\n  onMounted(() => {\n    TUIStore.watch(StoreName.CONV, {\n      currentConversationID: onCurrentConversationIDUpdated,\n      conversationList: onConversationListUpdated,\n      currentConversation: onCurrentConversationUpdated\n    });\n\n    // 初始状态\n    TUIStore.watch(StoreName.USER, {\n      displayOnlineStatus: onDisplayOnlineStatusUpdated,\n      userStatusList: onUserStatusListUpdated\n    });\n    if (!isUniFrameWork && isIOS && !isPC) {\n      addLongPressHandler();\n    }\n  });\n  onUnmounted(() => {\n    TUIStore.unwatch(StoreName.CONV, {\n      currentConversationID: onCurrentConversationIDUpdated,\n      conversationList: onConversationListUpdated,\n      currentConversation: onCurrentConversationUpdated\n    });\n\n    // 初始状态\n    TUIStore.unwatch(StoreName.USER, {\n      displayOnlineStatus: onDisplayOnlineStatusUpdated,\n      userStatusList: onUserStatusListUpdated\n    });\n  });\n  const isShowUserOnlineStatus = (conversation: IConversationModel): boolean => {\n    return displayOnlineStatus.value && conversation.type === TUIChatEngine.TYPES.CONV_C2C;\n  };\n  const showConversationActionMenu = (event: Event, conversation: IConversationModel, index: number, isContextMenuEvent?: boolean) => {\n    if (isContextMenuEvent) {\n      event.preventDefault();\n      if (isUniFrameWork) {\n        return;\n      }\n    }\n    currentConversation.value = conversation;\n    lastestOpenActionsMenuTime = Date.now();\n    getActionsMenuPosition(event, index);\n  };\n  const closeConversationActionMenu = () => {\n    // 防止连续触发overlay的tap事件\n    if (lastestOpenActionsMenuTime && Date.now() - lastestOpenActionsMenuTime > 300) {\n      currentConversation.value = undefined;\n      isShowOverlay.value = false;\n    }\n  };\n  const getActionsMenuPosition = (event: Event, index: number) => {\n    if (isUniFrameWork) {\n      if (typeof conversationListDomRef.value === 'undefined') {\n        emits('getPassingRef', conversationListDomRef);\n      }\n      const query = TUIGlobal?.createSelectorQuery().in(conversationListDomRef.value);\n      query.select(`#convlistitem-${index}`).boundingClientRect(data => {\n        if (data) {\n          actionsMenuPosition.value = {\n            // uni-h5的uni-page-head不被认为是视窗中的成员，因此手动上head的高度\n            top: data.bottom + (isH5 ? 44 : 0),\n            // @ts-expect-error in uniapp event has touches property\n            left: event.touches[0].pageX,\n            conversationHeight: data.height\n          };\n          isShowOverlay.value = true;\n        }\n      }).exec();\n    } else {\n      // 处理Vue原生\n      const rect = ((event.currentTarget || event.target) as HTMLElement)?.getBoundingClientRect() || {};\n      if (rect) {\n        actionsMenuPosition.value = {\n          top: rect.bottom,\n          left: isPC ? (event as MouseEvent).clientX : undefined,\n          conversationHeight: rect.height\n        };\n      }\n      isShowOverlay.value = true;\n    }\n  };\n  const enterConversationChat = (conversationID: string) => {\n    emits('handleSwitchConversation', conversationID);\n    TUIConversationService.switchConversation(conversationID);\n  };\n  function addLongPressHandler() {\n    if (!conversationListInnerDomRef.value) {\n      return;\n    }\n    addLongPressListener({\n      element: conversationListInnerDomRef.value,\n      onLongPress: (event, target) => {\n        const index = (Array.from(conversationListInnerDomRef.value!.children) as HTMLElement[]).indexOf(target!);\n        showConversationActionMenu(event, conversationList.value[index], index);\n      },\n      options: {\n        eventDelegation: {\n          subSelector: '.tui-conversation-content'\n        }\n      }\n    });\n  }\n  function onCurrentConversationUpdated(conversation: IConversationModel) {\n    currentConversation.value = conversation;\n  }\n  function onConversationListUpdated(list: IConversationModel[]) {\n    conversationList.value = list;\n  }\n  function onCurrentConversationIDUpdated(id: string) {\n    currentConversationID.value = id;\n  }\n  function onDisplayOnlineStatusUpdated(status: boolean) {\n    displayOnlineStatus.value = status;\n  }\n  function onUserStatusListUpdated(list: Map<string, IUserStatus>) {\n    if (list.size !== 0) {\n      userOnlineStatusMap.value = [...list.entries()].reduce((obj, [key, value]) => {\n        obj[key] = value;\n        return obj;\n      }, ({} as IUserStatusMap));\n    }\n  }\n  // 暴露给父组件，当监听到滑动事件时关闭actionsMenu\n  return Object.assign({\n    muteIcon,\n    isPC,\n    isMobile,\n    currentConversation,\n    currentConversationID,\n    currentConversationDomRect,\n    isShowOverlay,\n    conversationList,\n    conversationListInnerDomRef,\n    actionsMenuPosition,\n    userOnlineStatusMap,\n    isShowUserOnlineStatus,\n    showConversationActionMenu,\n    closeConversationActionMenu,\n    enterConversationChat\n  }, {\n    closeChildren: closeConversationActionMenu\n  });\n};\n__sfc_main.components = Object.assign({\n  ActionsMenu,\n  Avatar,\n  Icon\n}, __sfc_main.components);\nexport default __sfc_main;\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=style&index=1&id=2da8161e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=style&index=1&id=2da8161e&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1718595320359\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}